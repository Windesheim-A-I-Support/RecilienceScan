
P4_resiliencescan_web_interface
description: Implement a minimal web interface for ResilienceScan to upload data, run ingestion + reporting, and download outputs

PHASE TASK (WEB CONTROL PANEL)
This phase adds a thin web UI to control the already-working ingestion (P2) and reporting (P3).
Keep it boring and functional.
input: project: "ResilienceScan" architecture_reference: "outputs/architecture/resiliencescan_architecture_and_principles.md" container_reference: "P1_resiliencescan_container_foundation" ingestion_reference: "P2_resiliencescan_data_ingestion_and_normalization" reporting_reference: "P3_resiliencescan_reporting_engine_quarto_scrol" ui_goals: - "Upload a file (xlsx/csv/tsv)" - "Trigger ingestion" - "Trigger report rendering" - "List available reports" - "Download reports" - "Show run status and logs" preferred_web_frameworks: - "FastAPI (preferred)" - "Flask (acceptable)"

steps:

Choose and justify the web framework (FastAPI preferred for clean API + docs)
Implement the backend web service under app/web/:
app/web/main.py
app/web/routes/
app/web/templates/ (if server-rendered UI is used)
app/web/static/ (optional minimal CSS)
Define core endpoints:
GET / -> simple homepage (upload + actions)
POST /upload -> upload file to /data/incoming/
POST /run/ingest -> run ingestion pipeline (P2)
POST /run/render -> run render pipeline (P3)
GET /runs -> list recent runs with status
GET /reports -> list available rendered reports
GET /reports/{id} -> download a report artifact
GET /health -> health endpoint (matches container healthcheck)
GET /logs/{run_id} -> fetch logs for a run
Implement run tracking:
Generate a run_id for each ingest/render action
Store minimal metadata in /logs/ (json or csv)
Link output files to run_id
Ensure safe file handling:
Validate upload size and type
Never execute untrusted code from uploads
Store uploads with sanitized filenames
Integrate with docker-compose:
Expose a single port (e.g. 8080)
Ensure the container starts the web service by default
Add minimal UI:
Can be server-rendered HTML OR a minimal frontend
Must be usable by non-technical users
Avoid heavy JS frameworks
output: format: files generated_artifacts: - app/web/main.py - app/web/routes/* - app/web/templates/index.html (or equivalent) - app/web/static/* (optional) - logs/runs/ (run metadata) - updates to docker-compose.yml (port + command) documentation: - path: outputs/architecture/P4_web_interface_notes.md

constraints:

"Single container; no extra services"
"No authentication required by default, but architecture must allow adding it later"
"No email features in this phase"
"Must work on Windows Docker Desktop without extra setup"
"All state persists via volumes (/data, /reports, /logs)"
style: ui_philosophy: - minimal - clear - low_cognitive_load error_handling: - user_friendly_messages - detailed logs for admins

success_criteria:

"User can upload xlsx/csv/tsv via browser"
"User can trigger ingest and render from the UI"
"User can download generated PDF/HTML reports"
"Runs are tracked with status + logs"