% This is a combination of Pandoc templating and LaTeX
% Pandoc templating
% $-- is a Pandoc comment
% I add if comment could be interpreted as a Pandoc command
% $-- $if(subtitle)$ ... $endif$
% Here subtitle is true if the YAML has "subtitle: " and false otherwise
% $-- $subtitle$ (with $..$) is the value of subtitle in the YAML
% $-- So {\large\textit{$subtitle$}} is LaTeX with $subtitle$ replaced 
% with the YAML value
% $-- $if(by-author/allbutlast)$ means if there is more than one author
% since if there is only one author then there is no "allbutlast" value

\raggedleft % Right align the title page
\rule{1pt}{\textheight} % Vertical line
\hspace{0.05\textwidth} % Whitespace between the vertical line and title page text
%\parbox[b]{0.85\textwidth}{ % Adjust the width to move the title page left or right on the page
\begin{minipage}[b][\textheight][s]{0.85\textwidth}
{\large\bfseries\nohyphens{$title$}}\\[2\baselineskip] % Title
$if(subtitle)${\large\textit{$subtitle$}}\\[4\baselineskip]$endif$
		
% This hairy bit of code is just to get "and" between the last 2
% authors. See below if you don't need that
$if(by-author/allbutlast)$
$for(by-author/allbutlast)$
 {\large{$by-author.name.literal$}}$for(by-author.affiliations)${\textsuperscript{$it.number$}}$sep$,$endfor$$if(by-author.email)$,{\textsuperscript{*}}$endif$$sep$, 
$endfor$
$for(by-author/last)$
 {and \large{$by-author.name.literal$}}$for(by-author.affiliations)${\textsuperscript{$it.number$}}$sep$,$endfor$$if(by-author.email)$,{\textsuperscript{*}}$endif$
$endfor$
$else$
$for(by-author/last)$
 {\large{$by-author.name.literal$}}$for(by-author.affiliations)${\textsuperscript{$it.number$}}$sep$,$endfor$$if(by-author.email)$,{\textsuperscript{*}}$endif$
$endfor$
$endif$

% This is how to do it if you don't need the "and"
% $-- remove the "% $---" bit which indicates comment
% $-- $for(by-author)$
% $--     {$by-author.name.literal$}$for(by-author.affiliations)${\textsuperscript{$it.number$}}$sep$,$endfor$$if(by-author.email)$,{\textsuperscript{*}}$endif$$sep$, 
% $-- $endfor$

$for(by-affiliation)$
\affil[$it.number$]{$it.name$}
$endfor$

$for(by-author)$
$if(by-author.email)$
  \corrauthor[*]{$by-author.email$}
$endif$
$endfor$


%use \vfill instead to get the space to fill flexibly	
%\vspace{0.25\textheight} % Whitespace between the title block and the publisher

\vfill

% $-- $if(cover)$ means if there is cover: in the YAML
% $-- $cover$ is the value of cover: in YAML

$if(cover)$\includegraphics[width=4cm]{$cover$}$endif$

% Whitespace between the title block and the publisher
\vspace{0.25\textheight} 

{\noindent The Publisher~~\plogo}\\[\baselineskip] % Publisher and logo
\end{minipage}